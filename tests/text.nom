#..
    Tests for the stuff defined in lib/text.nom

use "core"

assume ((["x","y"] joined with ",") = "x,y") or barf "joined with failed"
assume ((["x","y"] joined) = "xy") or barf "joined failed"
assume (("asdf" capitalized) = "Asdf") or barf "capitalized failed"
assume (("asdf" with "X" instead of "s") = "aXdf") or barf "substitution failed"
# TODO: add tests for indent/dedent
assume ("\n" = (newline)) or barf "Text literals failed."
%x <- "\(green)hello\(reset color)"
assume (("x" + "y") = "xy")

say "Text test passed."

immediately:
    parse [アクション %spec %body] as: action %spec %body

%こんにちは <- "こんにちは"
アクション [% と言う]:
    "\(%)世界"

assume ((%こんにちは と言う) = "こんにちは世界") or barf "Unicode doesn't work"
